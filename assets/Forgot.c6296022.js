import{_ as u,o as m,d,f as t,h as g,v as f,n as p,t as S,g as b,S as w,a as v,l as y,u as F,b as x,r as i,e as l,w as T,T as $,m as P,i as k,j as C}from"./index.9c3ea51b.js";const j={name:"ForgotForm",props:{action:String,submit_text:String},data(){return{form:{email:""}}}},B={id:"form-container"},N=t("h4",{class:"form-header"},"Enter email",-1),O=t("label",null,"Email",-1);function V(s,e,n,r,o,c){return m(),d("div",B,[N,t("form",{onSubmit:e[1]||(e[1]=b(a=>s.$emit("on_submit",o.form),["prevent"]))},[O,g(t("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=a=>o.form.email=a),required:""},null,512),[[f,o.form.email]]),t("div",null,[t("button",{type:"submit",class:p(["submit",n.action])},S(n.submit_text),3)])],32)])}var A=u(j,[["render",V]]),E="/cute-eve/assets/cute_eve_forgot.146050f6.svg";const D={name:"Forgot",components:{ForgotForm:A,ShowAlert:w,Spinner:v},data(){return{type:null,message:null,show:!1,action:null,forgotFormProps:{submit_text:"Send reset email"}}},methods:{loadSpinner:y,unloadSpinner:F,loadToast:x,async handleSubmit(s){this.action="submitting",this.forgotFormProps.submit_text=" ",this.loadSpinner();try{const e=`${this.$api}users/forgot`,r=await(await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();r.status===202?(this.unloadSpinner(),this.loadToast(r.data.message,"success"),s.email="",setTimeout(()=>{this.$router.push({name:"Index"})},3e3)):(this.unloadSpinner(),this.loadToast(r.error,"error")),this.action="",this.forgotFormProps.submit_text="Send reset email"}catch(e){this.loadToast(e,"error")}}}},M=t("h4",{class:"center-text view-port-margin"},"Forgot your password ?",-1),q=t("p",{class:"center-text view-port-margin"},"We got you, just enter your email below and we will send you a link to update your password shortly.",-1),z={class:"holder"},I=t("img",{alt:"forgot password",class:"side-img",src:E},null,-1);function J(s,e,n,r,o,c){const a=i("Spinner"),_=i("ShowAlert"),h=i("ForgotForm");return m(),d("main",null,[l(a),l($,{name:"toast"},{default:T(()=>[o.show?(m(),k(_,{key:0,class:p(o.type),message:o.message},null,8,["class","message"])):C("",!0)]),_:1}),M,q,t("div",z,[I,l(h,P(o.forgotFormProps,{onOn_submit:c.handleSubmit,action:o.action}),null,16,["onOn_submit","action"])])])}var W=u(D,[["render",J]]);export{W as default};
