import{_ as k,k as C,b as U,l as T,u as I,o as d,d as h,f as e,g,h as c,p as P,v as _,n as p,t as r,F as S,S as D,q as x,s as M,x as E,r as b,e as y,w as V,i as A,j as f,T as B,y as w,z as N,A as j,B as O,C as G,m as K,D as q,a as L}from"./index.9c3ea51b.js";const J={name:"AdminDash",emits:["actionFeedback"],data(){return{create_user_submit:"Create",modify_user_submit:"Modify",suspend_user_submit:"Suspend",role:null,email:null,action:null}},methods:{openAction:C,loadToast:U,loadSpinner:T,unloadSpinner:I,async createUser(){this.action="submitting",this.create_user_submit=" ",this.loadSpinner();const l={email:this.email,role:this.role};try{const t=`${this.$api}users/create`,m=await(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",auth_token:this.$store.getters.AuthToken},body:JSON.stringify(l)})).json();m.status===201?(this.message=m.data.message,this.type="success",this.$emit("actionFeedback",this.message,this.type),this.unloadSpinner()):(this.message=m.error,this.type="error",this.unloadSpinner(),this.$emit("actionFeedback",this.message,this.type))}catch(t){return t}this.action="",this.create_user_submit="Create"},async suspendUser(){this.action="submitting"},async modifyRole(){this.action="submitting"}}},Y={class:"actions"},z={class:"actionContent",id:"createUser"},H=e("h3",null,"Create system user here",-1),Q=e("p",null,"Easy just fill the simple form below, on success a user will recieve an email with further instructions.",-1),W=e("hr",null,null,-1),X=e("label",null,"Select role ",-1),Z=e("option",{value:"admin"},"Admin",-1),ee=e("option",{value:"procurement"},"Procurement",-1),te=e("option",{value:"sales"},"Sales",-1),se=[Z,ee,te],ie=e("label",null,"Email ",-1),le={class:"actionContent",id:"suspendUser"},ne=e("h3",null,"Suspend system user here",-1),oe=e("p",null,"Just enter the email of the user you want to suspend.",-1),ae=e("hr",null,null,-1),re=e("label",null,"Email ",-1),ce={class:"actionContent",id:"modifyRole"},ue=e("h3",null,"Change the role of a user here.",-1),de=e("p",null,"Select the new role you want to give a user, enter their email and click update role.",-1),_e=e("hr",null,null,-1),he=e("label",null,"Select role ",-1),me=e("option",{value:"admin"},"Admin",-1),pe=e("option",{value:"procurement"},"Procurement",-1),be=e("option",{value:"sales"},"Sales",-1),ye=[me,pe,be],ge=e("label",null,"Email ",-1);function ke(l,t,n,m,s,o){return d(),h(S,null,[e("div",Y,[e("button",{class:"action-links",onClick:t[0]||(t[0]=a=>o.openAction(a,"createUser"))},"Create User"),e("button",{class:"action-links",onClick:t[1]||(t[1]=a=>o.openAction(a,"suspendUser"))},"Suspend User"),e("button",{class:"action-links",onClick:t[2]||(t[2]=a=>o.openAction(a,"modifyRole"))},"Modify Role")]),e("div",z,[H,Q,W,e("form",{onSubmit:t[5]||(t[5]=g((...a)=>o.createUser&&o.createUser(...a),["prevent"])),class:"dash"},[X,c(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.role=a),required:""},se,512),[[P,s.role]]),ie,c(e("input",{type:"email","onUpdate:modelValue":t[4]||(t[4]=a=>s.email=a),required:""},null,512),[[_,s.email]]),e("button",{class:p([s.action,"submit dashboard-submit"])},r(s.create_user_submit),3)],32)]),e("div",le,[ne,oe,ae,e("form",{onSubmit:t[7]||(t[7]=g((...a)=>o.suspendUser&&o.suspendUser(...a),["prevent"])),class:"dash"},[re,c(e("input",{type:"email","onUpdate:modelValue":t[6]||(t[6]=a=>s.email=a),required:""},null,512),[[_,s.email]]),e("button",{class:p([s.action,"submit dashboard-submit"])},r(s.suspend_user_submit),3)],32)]),e("div",ce,[ue,de,_e,e("form",{onSubmit:t[10]||(t[10]=g((...a)=>o.modifyRole&&o.modifyRole(...a),["prevent"])),class:"dash"},[he,c(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>s.role=a),required:""},ye,512),[[P,s.role]]),ge,c(e("input",{type:"email","onUpdate:modelValue":t[9]||(t[9]=a=>s.email=a),required:""},null,512),[[_,s.email]]),e("button",{class:p([s.action,"submit dashboard-submit"])},r(s.modify_user_submit),3)],32)])],64)}var fe=k(J,[["render",ke]]);const Se={name:"Search",data(){return{search_text:null}}},ve={id:"search-area"};function we(l,t,n,m,s,o){return d(),h("div",ve,[c(e("input",{type:"text",id:"search_text","onUpdate:modelValue":t[0]||(t[0]=a=>s.search_text=a),placeholder:"Search item ...",onKeyup:t[1]||(t[1]=a=>l.$emit("on_click_search",s.search_text)),autocomplete:"off"},null,544),[[_,s.search_text]])])}var $=k(Se,[["render",we]]);const Ce={name:"SalesDash",emits:["actionFeedback"],components:{Search:$,ShowAlert:D},data(){return{type:null,message:null,show:!1,action:null,items:[],search_result:[],items_on_cart:[],item_id:null,item_name:null,item_units:null,item_selling_price:null,item_buying_price:null,units_to_sell:null,post_sale:"Post sale",disabled:!0,get_report:"Get report"}},computed:{cartTotal(){let l=0;return this.items_on_cart.forEach(t=>{l+=t.total}),this.formatNumber(Number(l.toFixed(2)))},...x({token:"AuthToken"}),screenName(){if(this.token){const l=this.token.split(".");return JSON.parse(atob(l[1])).screen_name}}},methods:{openAction:C,loadToast:U,loadSpinner:T,unloadSpinner:I,formatNumber:M,dailySalesReport:E,handleSearch(l){const t=this.items.filter(n=>n.item.toLowerCase().includes(`${l}`.toLowerCase()));this.search_result=t},item_to_sell(l){this.item_id=l.item_sys_id,this.item_name=l.item,this.item_units=l.units,this.item_selling_price=l.selling_price,this.item_buying_price=l.buying_price},add_to_cart(){const l=document.getElementById("available_units").value,t=document.getElementById("units_to_sell").value;if(parseFloat(l)>=parseFloat(t)){const n={item_sys_id:this.item_id,item:this.item_name,buying_price:this.item_buying_price,selling_price:this.item_selling_price,units:this.units_to_sell,total:this.item_selling_price*this.units_to_sell};this.items_on_cart.push(n),this.disabled=!1,this.item_id="",this.item_name="",this.item_units="",this.item_selling_price="",this.item_buying_price="",this.units_to_sell=""}else{const n=document.getElementById("error_para");n.style.display="block",setTimeout(()=>{n.style.display="none"},5e3)}},clearCart(){this.items_on_cart.length=0},async postSale(){this.action="submitting",this.post_sale=" ",this.loadSpinner();try{const l=`${this.$api}sales/record`,n=await(await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",auth_token:this.$store.getters.AuthToken},body:JSON.stringify(this.items_on_cart)})).json();n.status===201?(this.unloadSpinner(),this.message=n.data,this.type="success",this.loadToast(this.message,this.type),this.search_result.length=0,this.items_on_cart.length=0,await this.$store.dispatch("getItems"),this.items=this.$store.getters.Items):(this.unloadSpinner(),this.message=n.error,this.type="error",this.loadToast(this.message,this.type))}catch(l){return l}this.action="",this.post_sale="Post sale"},async getTodaysSales(){this.action="submitting",this.get_report=" ",this.loadSpinner();try{const l=`${this.$api}sales`,n=await(await fetch(l,{method:"GET",headers:{"Content-Type":"application/json",auth_token:this.$store.getters.AuthToken}})).json();if(n.status===200)return this.unloadSpinner(),this.message="Report data fetched successfully, please wait for report to render.",this.type="success",this.$emit("actionFeedback",this.message,this.type),n.data;this.unloadSpinner(),this.message=n.error,this.type="error",this.loadToast(this.message,this.type)}catch{return"The server is offline or unreachable."}},async getReport(){let l=await this.getTodaysSales();this.action="",this.get_report="Get report";let t=[{header:"ITEM",dataKey:"item"},{header:"UNITS SOLD",dataKey:"units_sold"},{header:"UNIT PRICE",dataKey:"unit_price"},{header:"TOTAL",dataKey:"total"}];this.dailySalesReport(l,t,this.screenName)}},async created(){await this.$store.dispatch("getItems"),this.items=this.$store.getters.Items}},Ue={class:"actions"},Te={class:"actionContent",id:"makeSale"},Ie=e("p",null,"Search for the item you want to sell below & select it by clicking on it.",-1),Ae=e("hr",null,null,-1),Ne={class:"search-item-display"},Pe={class:"search-item-result"},xe=e("div",{class:"search-result-list"},[e("ul",null,[e("li",null,[e("label",{class:"li-label"},"Item")]),e("li",null,[e("label",{class:"li-label"},"Available Units")])])],-1),$e={class:"possible-item"},Fe=["onClick"],Re={class:"item-on-sale"},De=e("label",null,"Item",-1),Me=e("label",null,"Selling Price",-1),Ee=e("p",{class:"units-error",id:"error_para"},"You can't sell more units than you have in stock",-1),Ve=e("label",null,"Available Units",-1),Be=e("label",null,"Units to sell",-1),je=e("button",{type:"submit",class:"submit btn-add"},"Add to cart",-1),Oe=e("hr",null,null,-1),Ge={class:"cart"},Ke=N('<div class="cart-heading"><ul><li><label class="li-label">Item</label></li><li><label class="li-label">Units</label></li><li><label class="li-label">Price</label></li><li><label class="li-label">Total</label></li></ul></div>',1),qe={class:"cart-holder"},Le={class:"total"},Je=e("li",{class:"color"},".",-1),Ye=e("li",{class:"color"},".",-1),ze=e("li",null,"Total",-1),He={class:"sale"},Qe=["disabled"],We=["disabled"],Xe={class:"actionContent",id:"generateReports"},Ze=e("h3",null,"Generate your sales report for the day",-1),et=e("p",null,"You will only be able to generate your own report.",-1);function tt(l,t,n,m,s,o){const a=b("ShowAlert"),u=b("Search");return d(),h(S,null,[y(B,{name:"toast"},{default:V(()=>[s.show?(d(),A(a,{key:0,class:p(s.type),message:s.message},null,8,["class","message"])):f("",!0)]),_:1}),e("div",Ue,[e("button",{class:"action-links",onClick:t[0]||(t[0]=i=>o.openAction(i,"makeSale"))},"Sell"),e("button",{class:"action-links",onClick:t[1]||(t[1]=i=>o.openAction(i,"generateReports"))},"Reports")]),e("div",Te,[Ie,y(u,{class:"float-right",onOn_click_search:o.handleSearch},null,8,["onOn_click_search"]),Ae,e("div",Ne,[e("div",Pe,[xe,e("div",$e,[(d(!0),h(S,null,w(s.search_result,i=>(d(),h("div",{class:"item",key:i.item_sys_id,onClick:v=>o.item_to_sell(i)},[e("ul",null,[e("li",null,r(i.item),1),e("li",null,r(i.units),1)])],8,Fe))),128))])]),e("div",Re,[e("form",{onSubmit:t[8]||(t[8]=g((...i)=>o.add_to_cart&&o.add_to_cart(...i),["prevent"])),class:"add-to-cart-form dash"},[c(e("input",{type:"hidden","onUpdate:modelValue":t[2]||(t[2]=i=>s.item_id=i)},null,512),[[_,s.item_id]]),c(e("input",{type:"hidden","onUpdate:modelValue":t[3]||(t[3]=i=>s.item_buying_price=i)},null,512),[[_,s.item_buying_price]]),De,c(e("input",{type:"text",class:"item-name",disabled:"","onUpdate:modelValue":t[4]||(t[4]=i=>s.item_name=i)},null,512),[[_,s.item_name]]),Me,c(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=i=>s.item_selling_price=i),disabled:""},null,512),[[_,s.item_selling_price]]),Ee,Ve,c(e("input",{type:"text",id:"available_units","onUpdate:modelValue":t[6]||(t[6]=i=>s.item_units=i),disabled:""},null,512),[[_,s.item_units]]),Be,c(e("input",{type:"number",id:"units_to_sell","onUpdate:modelValue":t[7]||(t[7]=i=>s.units_to_sell=i),min:"0",step:"0.01"},null,512),[[_,s.units_to_sell]]),je],32)])]),Oe,e("div",Ge,[Ke,e("div",qe,[(d(!0),h(S,null,w(s.items_on_cart,i=>(d(),h("div",{class:"cart-items",key:i.item_sys_id},[e("ul",null,[e("li",null,r(i.item),1),e("li",null,r(i.units),1),e("li",null,r(i.selling_price),1),e("li",null,r(i.total),1)])]))),128))]),e("div",Le,[e("ul",null,[Je,Ye,ze,e("li",null,r(o.cartTotal),1)])]),e("div",He,[e("button",{type:"submit",class:p(["submit post-sale",s.action]),onClick:t[9]||(t[9]=(...i)=>o.postSale&&o.postSale(...i)),disabled:s.disabled},r(s.post_sale),11,Qe),e("button",{type:"submit",class:"submit clear-cart",onClick:t[10]||(t[10]=(...i)=>o.clearCart&&o.clearCart(...i)),disabled:s.disabled},"Clear cart",8,We)])])]),e("div",Xe,[Ze,et,e("button",{type:"submit",class:p(["submit dashboard-submit",s.action]),onClick:t[11]||(t[11]=i=>o.getReport())},r(s.get_report),3)])],64)}var st=k(Ce,[["render",tt]]);const it={name:"DashNotifications",props:["type","message"]};function lt(l,t,n,m,s,o){return d(),h("div",{class:p(n.type),id:"dashboard_notification"},r(n.message),3)}var F=k(it,[["render",lt]]);const nt={name:"ChangesModal",emits:["clearSearchResult"],components:{DashNotifications:F},props:{item_id:String,item_name:String,item_units:Number,item_buying_price:Number,item_selling_price:Number},data(){return{update_item_submit:"Save changes",action:null,show:!1,type:"",message:""}},methods:{async closeModal(){this.$emit("clearSearchResult"),document.getElementById("changes-modal").style.display="none"},async updateItem(){this.action="submitting",this.update_item_submit="";const l={item_sys_id:this.item_id,item:this.item_name,units:this.item_units,buying_price:this.item_buying_price,selling_price:this.item_selling_price};try{const t=`${this.$api}items/${this.item_id}`,m=await(await fetch(t,{method:"PATCH",headers:{"Content-Type":"application/json",auth_token:this.$store.getters.AuthToken},body:JSON.stringify(l)})).json();m.status===200?(this.message=m.data,this.type="success",this.show=!0,setTimeout(()=>{this.type="none",this.message=""},5e3)):(this.message=m.error,this.type="error",this.show=!0)}catch(t){return t}this.action="",this.update_item_submit="Save changes"}}},ot={class:"backdrop",id:"changes-modal"},at={class:"modal"},rt={class:"item-to-update"},ct=N('<h4 class="text-center">Update the item below</h4><div class="items-list"><ul class="larger-screens"><li><label class="li-label">Item</label></li><li><label class="li-label">Units Available</label></li><li><label class="li-label">Buying Price</label></li><li><label class="li-label">Selling Price</label></li></ul><ul class="smaller-screens"><li><label class="li-label">Item</label></li><li><label class="li-label">Available</label></li></ul></div>',2),ut={class:"items no-border"},dt={class:"larger-screens"},_t={class:"smaller-screens"},ht=e("hr",null,null,-1),mt=e("label",null,"Name",-1),pt=e("label",null,"Units Available",-1),bt=e("label",null,"Buying Price",-1),yt=e("label",null,"Selling Price",-1),gt=e("p",{class:"center-text"},[e("span",null,"Make sure you save your changes to the database")],-1);function kt(l,t,n,m,s,o){const a=b("DashNotifications");return d(),h("div",ot,[e("div",at,[e("button",{class:"round-button",onClick:t[0]||(t[0]=g((...u)=>o.closeModal&&o.closeModal(...u),["self"]))}),e("div",rt,[ct,e("div",ut,[e("ul",dt,[e("li",null,r(n.item_name),1),e("li",null,r(n.item_units),1),e("li",null,r(n.item_buying_price),1),e("li",null,r(n.item_selling_price),1)]),e("ul",_t,[e("li",null,r(n.item_name),1),e("li",null,r(n.item_units),1)])]),ht,s.show?(d(),A(a,{key:0,class:p(s.type),message:s.message},null,8,["class","message"])):f("",!0),e("form",{onSubmit:t[6]||(t[6]=g((...u)=>o.updateItem&&o.updateItem(...u),["prevent"])),class:"dash"},[c(e("input",{type:"hidden","onUpdate:modelValue":t[1]||(t[1]=u=>n.item_id=u)},null,512),[[_,n.item_id]]),mt,c(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=u=>n.item_name=u)},null,512),[[_,n.item_name]]),pt,c(e("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=u=>n.item_units=u),min:"0",step:"0.01"},null,512),[[_,n.item_units]]),bt,c(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=u=>n.item_buying_price=u),min:"0",step:"0.01"},null,512),[[_,n.item_buying_price]]),yt,c(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=u=>n.item_selling_price=u),min:"0",step:"0.01"},null,512),[[_,n.item_selling_price]]),e("button",{class:p([s.action,"submit dashboard-submit"])},r(s.update_item_submit),3)],32),gt])])])}var ft=k(nt,[["render",kt]]);const St={name:"ProcurementDash",emits:["actionFeedback"],components:{Search:$,ChangesModal:ft},data(){return{changesModalProps:{item_id:"",item_name:"",item_units:0,item_buying_price:0,item_selling_price:0},new_stock_submit:"Upload",update_stock_submit:"Modify",generate_report_submit:"Suspend",update_item_submit:"Save changes",get_stock_submit:"Get stock report",dated_sales_submit:"Get sales report",composite_item_submit:"Get composite report",showChangesModal:!1,start_date:"",end_date:"",composite_start_date:"",composite_end_date:"",action:null,items:[],search_result:[]}},methods:{makeExcelFile:j,openAction:C,loadToast:U,loadSpinner:T,unloadSpinner:I,stockInShop:O,salesReportByDate:G,async uploadStockFile(){this.action="submitting",this.loadSpinner(),this.new_stock_submit="";let l=document.getElementById("newItemFile");const t=new FormData;t.append("newItemFile",l.files[0]);try{const n=`${this.$api}items/upload`,s=await(await fetch(n,{method:"POST",headers:{auth_token:this.$store.getters.AuthToken},body:t})).json();s.status===200?(this.unloadSpinner(),this.message=s.data,this.type="success",this.$emit("actionFeedback",this.message,this.type)):(this.unloadSpinner(),this.message=s.error,this.type="error",this.$emit("actionFeedback",this.message,this.type))}catch(n){return n}this.action="",this.new_stock_submit="Upload"},handleSearch(l){const t=this.items.filter(n=>n.item.toLowerCase().includes(`${l}`.toLowerCase()));this.search_result=t},item_to_update(l){document.getElementById("changes-modal").style.display="block",this.changesModalProps.item_id=l.item_sys_id,this.changesModalProps.item_name=l.item,this.changesModalProps.item_units=l.units,this.changesModalProps.item_buying_price=l.buying_price,this.changesModalProps.item_selling_price=l.selling_price},async clearTableAndUpdate(){this.search_result.length=0,await this.$store.dispatch("getItems"),this.items=this.$store.getters.Items},async get_stock_report(){this.action="submitting",this.get_stock_submit=" ",this.loadSpinner(),this.items.length=0,await this.$store.dispatch("getItems"),this.items=this.$store.getters.Items;let l=[{header:"ITEM",dataKey:"item"},{header:"UNITS",dataKey:"units"},{header:"UNIT PRICE",dataKey:"buying_price"},{header:"COST",dataKey:"cost"}];this.stockInShop(this.items,l),this.action="",this.get_stock_submit="Get stock report",this.unloadSpinner()},async get_dated_sales(){this.action="submitting",this.dated_sales_submit=" ",this.loadSpinner();try{const l=`${this.$api}sales/${this.start_date}/${this.end_date}`,n=await(await fetch(l,{method:"GET",headers:{"Content-Type":"application/json",auth_token:this.$store.getters.AuthToken}})).json();if(n.status===200)return this.unloadSpinner(),this.message="Report data fetched successful, wait for report to render.",this.type="success",this.$emit("actionFeedback",this.message,this.type),n.data;this.unloadSpinner(),this.message=n.error,this.type="error",this.$emit("actionFeedback",this.message,this.type),this.action=" ",this.dated_sales_submit="Get sales report"}catch(l){return l}},async generate_dated_sale_report(){let l=await this.get_dated_sales();this.action=" ",this.dated_sales_submit="Get sales report";let t=[{header:"ITEM",dataKey:"item"},{header:"UNITS SOLD",dataKey:"units_sold"},{header:"UNIT PRICE",dataKey:"unit_price"},{header:"TOTAL",dataKey:"total"}];this.salesReportByDate(l,t,this.start_date,this.end_date)},async get_dated_composite_data(){this.action="submitting",this.composite_item_submit=" ",this.loadSpinner();try{const l=`${this.$api}items/${this.composite_start_date}/${this.composite_end_date}`,n=await(await fetch(l,{method:"GET",headers:{"Content-Type":"application/json",auth_token:this.$store.getters.AuthToken}})).json();if(n.status===200)return this.unloadSpinner(),this.message="Report data fetched successful, wait for report to render.",this.type="success",this.$emit("actionFeedback",this.message,this.type),n.data;this.unloadSpinner(),this.message=n.error,this.type="error",this.$emit("actionFeedback",this.message,this.type),this.action=" ",this.composite_item_submit="Get composite report"}catch(l){return l}},async generate_dated_composite_report(){let l=await this.get_dated_composite_data();this.action=" ",this.composite_item_submit="Get composite report";let t=["Item","Units In Stock","Unit Purchase Price","Unit Selling Price","Units Sold","Total Sale","Unit Profit Margin","Total Profit Margin"],n=`Composite item data for items sold between the ${this.composite_start_date} and ${this.composite_end_date}.xlsx`;this.makeExcelFile(l,t,n)}},async created(){await this.$store.dispatch("getItems"),this.items=this.$store.getters.Items},mounted(){document.getElementById("changes-modal").style.display="none"}},vt={class:"actions"},wt={class:"actionContent",id:"newStock"},Ct=e("h3",null,"Upload new stock file",-1),Ut=e("p",null,[e("span",null,"New stock is stock that did not exist before and now your are introducing it.")],-1),Tt=e("hr",null,null,-1),It=e("label",null,"New stock file",-1),At=e("input",{type:"file",class:"file",id:"newItemFile",accept:".xlsx, .xls",required:""},null,-1),Nt={class:"actionContent",id:"updateStock"},Pt=e("h3",null,"Make changes to stock",-1),xt=e("p",null,[q("You can make changes to an item that is change things like "),e("span",null,"Units, Prices, Name")],-1),$t=e("p",null,"First step is to search for the item in the search bar.",-1),Ft=e("p",null,[e("span",null,"If the item is found select it by clicking on it.")],-1),Rt=N('<hr><div class="items-list"><ul class="larger-screens"><li><label class="li-label">Item</label></li><li><label class="li-label">Units Available</label></li><li><label class="li-label">Buying Price</label></li><li><label class="li-label">Selling Price</label></li></ul><ul class="smaller-screens"><li><label class="li-label">Item</label></li><li><label class="li-label">Units Available</label></li></ul></div>',2),Dt={class:"results-overflow"},Mt=["onClick"],Et={class:"larger-screens"},Vt={class:"smaller-screens"},Bt={class:"actionContent",id:"generateReports"},jt=e("h3",null,"Generate various reports",-1),Ot=e("hr",null,null,-1),Gt={class:"dash"},Kt=e("h4",null,"Stock available report",-1),qt=e("p",null,"Show a report of all stock",-1),Lt=e("hr",null,null,-1),Jt={class:"dash"},Yt=e("h4",null,"Sales reports by date",-1),zt=e("p",null,"Show a sales report for a given duration, just enter the start and end date.",-1),Ht=e("label",null,"Start date",-1),Qt=e("label",null,"End date",-1),Wt=e("hr",null,null,-1),Xt={class:"dash"},Zt=e("h4",null,"Composite item information by date",-1),es=e("p",null,"Show a sales report and other composite information for an item for a given duration, just enter the start and end date.",-1),ts=e("label",null,"Start date",-1),ss=e("label",null,"End date",-1);function is(l,t,n,m,s,o){const a=b("Search"),u=b("ChangesModal");return d(),h(S,null,[e("div",vt,[e("button",{class:"action-links",onClick:t[0]||(t[0]=i=>o.openAction(i,"newStock"))},"New Stock"),e("button",{class:"action-links",onClick:t[1]||(t[1]=i=>o.openAction(i,"updateStock"))},"Update Stock"),e("button",{class:"action-links",onClick:t[2]||(t[2]=i=>o.openAction(i,"generateReports"))},"Reports")]),e("div",wt,[Ct,Ut,Tt,e("form",{onSubmit:t[3]||(t[3]=g((...i)=>o.uploadStockFile&&o.uploadStockFile(...i),["prevent"])),class:"remove-padding"},[It,At,e("button",{class:p([s.action,"submit dashboard-submit"])},r(s.new_stock_submit),3)],32)]),e("div",Nt,[Pt,xt,$t,Ft,y(a,{onOn_click_search:o.handleSearch},null,8,["onOn_click_search"]),Rt,e("div",Dt,[(d(!0),h(S,null,w(s.search_result,i=>(d(),h("div",{class:"items",key:i.item_sys_id,onClick:v=>o.item_to_update(i)},[e("ul",Et,[e("li",null,r(i.item),1),e("li",null,r(i.units),1),e("li",null,r(i.buying_price),1),e("li",null,r(i.selling_price),1)]),e("ul",Vt,[e("li",null,r(i.item),1),e("li",null,r(i.units),1)])],8,Mt))),128))]),y(u,K(s.changesModalProps,{action:s.action,onClearSearchResult:o.clearTableAndUpdate}),null,16,["action","onClearSearchResult"])]),e("div",Bt,[jt,Ot,e("div",Gt,[Kt,qt,e("button",{class:p([s.action,"submit dashboard-submit"]),onClick:t[4]||(t[4]=(...i)=>o.get_stock_report&&o.get_stock_report(...i))},r(s.get_stock_submit),3)]),Lt,e("div",Jt,[Yt,zt,Ht,c(e("input",{type:"date","onUpdate:modelValue":t[5]||(t[5]=i=>s.start_date=i),required:""},null,512),[[_,s.start_date]]),Qt,c(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=i=>s.end_date=i),required:""},null,512),[[_,s.end_date]]),e("button",{class:p([s.action,"submit dashboard-submit"]),onClick:t[7]||(t[7]=(...i)=>o.generate_dated_sale_report&&o.generate_dated_sale_report(...i))},r(s.dated_sales_submit),3)]),Wt,e("div",Xt,[Zt,es,ts,c(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=i=>s.composite_start_date=i),required:""},null,512),[[_,s.composite_start_date]]),ss,c(e("input",{type:"date","onUpdate:modelValue":t[9]||(t[9]=i=>s.composite_end_date=i),required:""},null,512),[[_,s.composite_end_date]]),e("button",{class:p([s.action,"submit dashboard-submit"]),onClick:t[10]||(t[10]=(...i)=>o.generate_dated_composite_report&&o.generate_dated_composite_report(...i))},r(s.composite_item_submit),3)])])],64)}var ls=k(St,[["render",is]]);const ns={name:"Dashboard",components:{Spinner:L,AdminDash:fe,SalesDash:st,ProcurementDash:ls,DashNotifications:F},data(){return{type:"",message:"",show:!1}},methods:{actionNotification(...l){const[t,n]=l;this.show=!0,this.type=n,this.message=t,setTimeout(()=>{this.type="none",this.message=""},5e3)}},computed:{...x({token:"AuthToken"}),userRole(){if(this.token){const l=this.token.split(".");return JSON.parse(atob(l[1])).role}}}},os={key:1},as={key:2},rs={key:3},cs=e("h4",{class:"center-text",id:"profileInstruction"},"Click on any option to carry out the task.",-1);function us(l,t,n,m,s,o){const a=b("Spinner"),u=b("DashNotifications"),i=b("AdminDash"),v=b("ProcurementDash"),R=b("SalesDash");return d(),h("main",null,[y(a),s.show?(d(),A(u,{key:0,class:p(s.type),message:s.message},null,8,["class","message"])):f("",!0),o.userRole==="admin"?(d(),h("div",os,[y(i,{onActionFeedback:o.actionNotification},null,8,["onActionFeedback"])])):f("",!0),o.userRole==="procurement"?(d(),h("div",as,[y(v,{onActionFeedback:o.actionNotification},null,8,["onActionFeedback"])])):f("",!0),o.userRole==="sales"?(d(),h("div",rs,[y(R)])):f("",!0),cs])}var _s=k(ns,[["render",us]]);export{_s as default};
