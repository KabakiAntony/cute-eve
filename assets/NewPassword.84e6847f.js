import{_ as w,S as y,a as f,l as g,u as S,b,c as v,r as l,o as d,d as x,e as p,w as T,T as P,f as e,g as B,h as c,v as u,n as m,t as C,i as k,j as N}from"./index.9c3ea51b.js";import{_ as V}from"./cute_eve_update_password.0b264fc5.js";const q={name:"Update",components:{ShowAlert:y,Spinner:f},props:["query"],data(){return{submit_text:"Set new password",action:null,type:null,message:null,show:!1,password:null,confirm_password:null}},methods:{loadSpinner:g,unloadSpinner:S,loadToast:b,comparePasswords:v,async handleSubmit(){const n={password:this.password,origin:"forgot"};if(this.comparePasswords()){this.action="submitting",this.submit_text=" ",this.loadSpinner();try{const s=`${this.$api}users/update`,o=await(await fetch(s,{method:"PATCH",headers:{"Content-Type":"application/json",auth_token:this.query},body:JSON.stringify(n)})).json();o.status===200?(this.unloadSpinner(),this.message=o.data,this.type="success",this.loadToast(this.message,"success"),setTimeout(()=>{this.$router.push({name:"Dashboard"})},3e3)):(this.message=o.error,this.type="error",this.unloadSpinner(),this.loadToast(this.message,this.type))}catch(s){return s}this.action="",this.submit_text="Save"}else{const s=document.getElementById("pass-error"),a=document.getElementById("password"),o=document.getElementById("confirm-password");s.style.display="block",setTimeout(()=>{s.style.display="none",a.style.border="",o.style.border=""},5e3)}}}},A=e("h4",{class:"center-text view-port-margin"},"Set a new password to regain access to your account.",-1),E={class:"holder"},U=e("img",{alt:"forgot password",class:"side-img",src:V},null,-1),j={id:"form-container"},D=e("h4",{class:"form-header"},"Update your password",-1),I=e("p",{class:"password-error",id:"pass-error"},"Passwords do not match.",-1),M=e("label",null,"Password",-1),z=e("label",null,"Confirm Password",-1);function H(n,s,a,o,t,i){const h=l("Spinner"),_=l("ShowAlert");return d(),x("main",null,[p(h),p(P,{name:"toast"},{default:T(()=>[t.show?(d(),k(_,{key:0,class:m(t.type),message:t.message},null,8,["class","message"])):N("",!0)]),_:1}),A,e("div",E,[U,e("div",j,[D,e("form",{onSubmit:s[2]||(s[2]=B((...r)=>i.handleSubmit&&i.handleSubmit(...r),["prevent"]))},[I,M,c(e("input",{type:"password","onUpdate:modelValue":s[0]||(s[0]=r=>t.password=r),id:"password",required:""},null,512),[[u,t.password]]),z,c(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=r=>t.confirm_password=r),id:"confirm-password",required:""},null,512),[[u,t.confirm_password]]),e("div",null,[e("button",{type:"submit",class:m(["submit",t.action])},C(t.submit_text),3)])],32)])])])}var F=w(q,[["render",H]]);export{F as default};
